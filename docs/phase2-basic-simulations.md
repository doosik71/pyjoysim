# Phase 2: 기본 시뮬레이션 구현 (6주)

## 개요

Phase 1에서 구축한 기반 시스템을 활용하여 핵심 시뮬레이션 모듈들을 구현하는 단계입니다. 2D 자동차 시뮬레이션, 로봇 팔 제어, 기본 UI를 완성합니다.

## 목표

- 실용적인 2D 자동차 시뮬레이션 완성
- 교육용 로봇 팔 시뮬레이션 구현
- 직관적인 사용자 인터페이스 개발
- 기본적인 시뮬레이션 선택 및 실행 시스템

## 주요 작업 항목

### Week 1-2: 2D 자동차 시뮬레이션

- [ ] CarSimulation 클래스 구현
  - [ ] 차량 물리 모델 구현
    - [ ] 전륜/후륜 구동 시스템
    - [ ] 현실적인 조향 모델
    - [ ] 가속/제동/관성 처리
    - [ ] 타이어 마찰력 시뮬레이션
  - [ ] 차량 렌더링 시스템
    - [ ] 차량 스프라이트 렌더링
    - [ ] 바퀴 회전 애니메이션
    - [ ] 브레이크등/방향지시등 표시
    - [ ] 스피드미터 UI
- [ ] 트랙 시스템 구현
  - [ ] 트랙 데이터 형식 정의 (JSON)
  - [ ] 기본 트랙 3개 제작
  - [ ] 충돌 경계 설정
  - [ ] 체크포인트 시스템
- [ ] 조이스틱 매핑
  - [ ] 좌 스틱: 조향
  - [ ] 우 트리거: 가속
  - [ ] 좌 트리거: 제동
  - [ ] 버튼: 핸드브레이크, 시점 변경

### Week 3-4: 로봇 팔 시뮬레이션

- [ ] RobotArmSimulation 클래스 구현
  - [ ] 로봇 팔 물리 모델
    - [ ] 3-DOF 로봇 팔 구현
    - [ ] 관절 제한 및 제약
    - [ ] 중력 보상
    - [ ] 모터 토크 시뮬레이션
  - [ ] 역기구학 계산
    - [ ] 목표 위치 계산
    - [ ] 관절각 해법
    - [ ] 특이점 처리
    - [ ] 경로 계획 기본 알고리즘
  - [ ] 시각화 시스템
    - [ ] 로봇 팔 3D 스타일 렌더링 (2D 투영)
    - [ ] 작업 공간 표시
    - [ ] 목표점 마커
    - [ ] 궤적 표시
- [ ] 제어 인터페이스
  - [ ] 직접 관절 제어 모드
  - [ ] 엔드 이펙터 위치 제어 모드
  - [ ] 사전 정의된 동작 시퀀스
- [ ] 조이스틱 매핑
  - [ ] 좌 스틱: X-Y 위치 제어
  - [ ] 우 스틱: Z 위치 및 회전
  - [ ] 버튼: 모드 전환, 그립퍼 제어

### Week 5-6: 사용자 인터페이스 및 통합

- [ ] MainWindow 클래스 구현
  - [ ] 메인 메뉴 시스템
  - [ ] 시뮬레이션 선택 화면
  - [ ] 설정 메뉴
  - [ ] 도움말 시스템
- [ ] SimulationSelector 클래스 구현
  - [ ] 시뮬레이션 썸네일 표시
  - [ ] 설명 및 조작법 표시
  - [ ] 난이도 표시
  - [ ] 조이스틱 상태 확인
- [ ] ControlPanel 클래스 구현
  - [ ] 실시간 상태 표시
  - [ ] 일시정지/재시작 기능
  - [ ] 리셋 기능
  - [ ] 성능 모니터링 (FPS, 메모리)
- [ ] 통합 및 테스트
  - [ ] 시뮬레이션 간 전환 시스템
  - [ ] 설정 저장/로드 확인
  - [ ] 다양한 조이스틱으로 테스트
  - [ ] 성능 최적화

## 기술 스택

- **UI 프레임워크**: pygame (embedded UI) 또는 tkinter (별도 창)
- **물리 시뮬레이션**: pymunk
- **그래픽**: pygame + custom widgets
- **데이터 형식**: JSON (트랙, 설정)
- **수학 라이브러리**: numpy, scipy

## 성공 기준

- [ ] 자동차가 조이스틱으로 자연스럽게 조작됨
- [ ] 로봇 팔이 목표 위치에 정확히 도달
- [ ] UI를 통해 시뮬레이션 선택 및 전환 가능
- [ ] 60 FPS 유지 (복잡한 시뮬레이션에서도)
- [ ] 모든 통합 테스트 통과
- [ ] 초보자도 쉽게 사용 가능한 인터페이스

## 기능 상세 명세

### 자동차 시뮬레이션 상세 기능

```python
class CarSimulation(BaseSimulation):
    # 차량 물리 매개변수
    mass: float = 1200  # kg
    wheelbase: float = 2.5  # m
    max_steering_angle: float = 30  # degrees
    max_engine_force: float = 3000  # N
    max_brake_force: float = 5000  # N
    
    # 시뮬레이션 기능
    - 현실적인 차량 동역학
    - 여러 차종 선택 (스포츠카, SUV, 트럭)
    - 날씨 효과 (비, 눈 → 마찰력 변화)
    - 충돌 효과 및 데미지 시스템
    - 랩타임 기록
```

### 로봇 팔 시뮬레이션 상세 기능

```python
class RobotArmSimulation(BaseSimulation):
    # 로봇 매개변수
    link_lengths: List[float] = [0.3, 0.25, 0.15]  # m
    joint_limits: List[Tuple[float, float]]  # degrees
    max_joint_speed: float = 90  # degrees/sec
    
    # 교육적 기능
    - 관절각 실시간 표시
    - 작업 공간 시각화
    - 역기구학 계산 과정 표시
    - 장애물 회피 시뮬레이션
    - 정밀도 측정 게임
```

## 위험 요소 및 대응책

### 위험 요소

1. **물리 시뮬레이션 안정성**
   - 고속 충돌 시 물리 엔진 불안정
   - 로봇 팔 특이점에서의 계산 오류

2. **사용자 경험**
   - 복잡한 제어로 인한 학습 곡선
   - UI 반응성 저하

3. **성능 최적화**
   - 복잡한 물리 계산으로 인한 프레임 드롭
   - 메모리 사용량 증가

### 대응책

1. **물리 엔진 안정성 확보**
   - 물리 스텝 크기 조정
   - 충돌 감지 정확도 개선
   - 특이점 처리 알고리즘 구현

2. **사용자 경험 개선**
   - 튜토리얼 모드 구현
   - 점진적 난이도 증가
   - 실시간 힌트 시스템

3. **성능 모니터링**
   - 프로파일링 도구 통합
   - 적응적 품질 설정
   - 메모리 풀 사용

## 테스트 계획

### 단위 테스트

- [ ] 차량 물리 계산 정확성
- [ ] 로봇 팔 역기구학 해법
- [ ] UI 컴포넌트 기능성

### 통합 테스트

- [ ] 시뮬레이션 간 전환
- [ ] 조이스틱 입력 처리
- [ ] 설정 저장/로드

### 사용자 테스트

- [ ] 다양한 연령대 사용자 테스트
- [ ] 학습 효과 측정
- [ ] 사용성 개선점 도출

## 다음 단계 준비

- Phase 3을 위한 3D 렌더링 연구
- 드론 시뮬레이션 물리 모델 연구
- 네트워킹 아키텍처 설계

## 산출물

- [ ] 완전한 2D 자동차 시뮬레이션
- [ ] 교육용 로봇 팔 시뮬레이션
- [ ] 통합 사용자 인터페이스
- [ ] 시뮬레이션 관리 시스템
- [ ] 사용자 가이드 및 튜토리얼
- [ ] 통합 테스트 스위트
- [ ] 성능 벤치마크 리포트
